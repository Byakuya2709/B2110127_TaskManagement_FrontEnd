import{_ as i,b as p,o as u,c as o,a as t,F as g,k as _,n as c,t as e,p as k,l as f}from"./index-C4bAc271.js";const C={data(){return{updates:[],loading:!0}},created(){this.fetchTaskUpdates()},computed:{userId(){return this.$authStore.userId}},methods:{async fetchTaskUpdates(){var a,n;this.loading=!0;try{const l=await p.get(`/user/task/update-request/${this.userId}/all`);this.updates=l.data.data}catch(l){this.$toast.error(((n=(a=l.response)==null?void 0:a.data)==null?void 0:n.message)||l.message)}finally{this.loading=!1}},formatDate(a){const n={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Bangkok",hour12:!1};return new Date(a).toLocaleString("vi-VN",n)},toTaskInfo(a){this.$router.replace({name:"TaskInfo",params:{taskId:a}})},translateStatus(a){return{PENDING:"Đang chờ",IN_PROGRESS:"Đang tiến hành",COMPLETED:"Đã hoàn thành",CANCELED:"Hủy",APPROVED:"Đã chấp thuận",REJECTED:"Đã từ chối"}[a]||a},getRowClass(a){return a.status==="APPROVED"?"table-success":a.status==="REJECTED"?"table-danger":""}}},h=a=>(k("data-v-e5768f47"),a=a(),f(),a),T=h(()=>t("h2",null,"Danh Sách Yêu Cầu Cập Nhật Tác Vụ",-1)),E={key:0},S={key:1,class:"table table-bordered"},D=h(()=>t("thead",null,[t("tr",{class:"table-dark"},[t("th",null,"Tác vụ"),t("th",null,"Trạng thái tác vụ"),t("th",null,"Ngày Yêu Cầu Cập Nhật"),t("th",null,"Trạng Thái Yêu Cầu Cập Nhật"),t("th",null,"Mô Tả Cập Nhật"),t("th",null,"Trạng Thái Xét Duyệt"),t("th",null,"Nhận Xét Quản trị viên")])],-1)),y=["onClick"],I={class:"task-title",title:"Xem tác vụ"};function m(a,n,l,N,d,r){return u(),o("div",null,[T,d.loading?(u(),o("div",E,"Đang tải dữ liệu...")):(u(),o("table",S,[D,t("tbody",null,[(u(!0),o(g,null,_(d.updates,s=>(u(),o("tr",{key:s.id,class:c(r.getRowClass(s))},[t("td",{onClick:v=>r.toTaskInfo(s.task.id)},[t("a",I,e(s.task.title),1)],8,y),t("td",null,e(r.translateStatus(s.task.status)),1),t("td",null,e(r.formatDate(s.requestedDate)),1),t("td",{class:c({underline:s.requestedStatus!==s.task.status})},e(r.translateStatus(s.requestedStatus)),3),t("td",null,e(s.description||"Không có mô tả"),1),t("td",null,e(r.translateStatus(s.status)),1),t("td",null,e(s.adminComment||"Chưa có nhận xét"),1)],2))),128))])]))])}const R=i(C,[["render",m],["__scopeId","data-v-e5768f47"]]);export{R as default};
