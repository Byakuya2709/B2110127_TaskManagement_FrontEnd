import{_,o as l,c as h,a as t,t as i,i as r,n as v,e as g,p as k,l as p,b as T,r as D,w as S,f as y,F as E,k as C,g as x,q as N}from"./index-DyDoL_kO.js";const b={props:{task:{type:Object,required:!0}},methods:{formatDate(s){return new Date(s).toLocaleDateString()},editTask(){this.$emit("editTask",this.task)},goToTaskDetail(){this.$router.push({name:"TaskDetail",params:{taskId:this.task.id}})}},computed:{statusBadge(){return{"badge-success":this.task.status==="COMPLETED","badge-warning":this.task.status==="PENDING","badge-danger":this.task.status==="CANCELED","badge-info":this.task.status==="IN_PROGRESS"}}}},d=s=>(k("data-v-21469d79"),s=s(),p(),s),w={class:"card-body"},I={class:"card-title task-title"},L=d(()=>t("hr",null,null,-1)),B={class:"card-text task-description"},P=d(()=>t("hr",null,null,-1)),q={class:"container task-details"},O={class:"row"},V={class:"col-6 text-right"},G=d(()=>t("strong",null,"Ngày tạo công việc:",-1)),M={class:"col-6 text-right"},R=d(()=>t("strong",null,"Ngày hoàn thành:",-1)),$={class:"col-6 text-right"},Q=d(()=>t("strong",null,"Lần cuối cập nhật:",-1)),j={class:"col-6 text-left"},A=d(()=>t("strong",null,"Chịu trách nhiệm:",-1)),F={class:"row mt-3"},z={class:"col-12 text-center"},H=d(()=>t("hr",null,null,-1)),U={class:"d-flex justify-content-center"};function J(s,a,o,f,u,e){return l(),h("div",{onClick:a[1]||(a[1]=(...c)=>e.goToTaskDetail&&e.goToTaskDetail(...c)),class:"card task-card"},[t("div",w,[t("h5",I,i(o.task.title),1),L,t("p",B,i(o.task.description),1),P,t("div",q,[t("div",O,[t("div",V,[G,r(" "+i(e.formatDate(o.task.createdDate)),1)]),t("div",M,[R,r(" "+i(e.formatDate(o.task.date)),1)]),t("div",$,[Q,r(" "+i(e.formatDate(o.task.updatedDate)),1)]),t("div",j,[A,r(" "+i(o.task.userName),1)])]),t("div",F,[t("div",z,[t("span",{class:v(["badge",e.statusBadge])},i(o.task.status),3)])])]),H,t("div",U,[t("button",{onClick:a[0]||(a[0]=g((...c)=>e.editTask&&e.editTask(...c),["stop"])),class:"btn btn-custom-primary mx-2"}," Cập nhật ")])])])}const K=_(b,[["render",J],["__scopeId","data-v-21469d79"]]),W={components:{TaskComponent:K},data(){return{tasks:[],selectedStatus:this.$route.query.status||""}},computed:{filteredTasks(){return this.selectedStatus?this.tasks.filter(s=>s.status===this.selectedStatus):this.tasks}},created(){this.fetchTasks()},methods:{async fetchTasks(){try{const s=await T.get("/admin/task/all");this.tasks=s.data.data}catch(s){console.log(s),this.$toast.error(s.response.data.message)}},updateQuery(){this.selectedStatus?this.$router.push({query:{status:this.selectedStatus}}):this.$router.push({query:null})},async handleEditTask(s){this.$router.push({name:"EditTask",params:{id:s.id}})}}},m=s=>(k("data-v-9448fc91"),s=s(),p(),s),X={class:"task-list container"},Y=m(()=>t("h2",{class:"text-center"},"Danh sách tác vụ",-1)),Z={class:"text-left mb-3"},tt=m(()=>t("label",{for:"status-filter"},"Lọc theo trạng thái:",-1)),st=N('<option value="" data-v-9448fc91>Tất cả</option><option value="COMPLETED" data-v-9448fc91>Hoàn thành</option><option value="IN_PROGRESS" data-v-9448fc91>Đang thực hiện</option><option value="PENDING" data-v-9448fc91>Đang chờ</option><option value="CANCELED" data-v-9448fc91>Bị hủy</option>',5),et=[st],at={class:"row"};function ot(s,a,o,f,u,e){const c=D("TaskComponent");return l(),h("div",X,[Y,t("div",Z,[tt,S(t("select",{id:"status-filter","onUpdate:modelValue":a[0]||(a[0]=n=>u.selectedStatus=n),onChange:a[1]||(a[1]=(...n)=>e.updateQuery&&e.updateQuery(...n))},et,544),[[y,u.selectedStatus]])]),t("div",at,[(l(!0),h(E,null,C(e.filteredTasks,n=>(l(),h("div",{key:n.id,class:"col-md-4 mb-3"},[x(c,{task:n,onEditTask:e.handleEditTask},null,8,["task","onEditTask"])]))),128))])])}const dt=_(W,[["render",ot],["__scopeId","data-v-9448fc91"]]);export{dt as default};
