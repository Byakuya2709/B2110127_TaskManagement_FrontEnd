import{_ as h,b as l,o as _,c as m,a as t,i as d,t as c,e as f,w as p,f as k,v as g,p as v,l as b}from"./index-B8bC3NQi.js";const D={name:"UpdateTask",data(){return{status:"",updateDescription:"",task:{}}},created(){this.fetchCurrentTask()},methods:{async fetchCurrentTask(){var a,s;try{const o=await l.get(`/user/task/${this.$route.params.id}`);this.task=o.data.data,this.status=this.task.status}catch(o){console.error(o),this.$toast.error(((s=(a=o.response)==null?void 0:a.data)==null?void 0:s.message)||"An unexpected error occurred.")}},async submitUpdate(){var a,s;try{const o=await l.post("/user/task/update",{taskId:this.$route.params.id,userId:this.userId,updateStatus:this.status,updateDescription:this.updateDescription});this.$toast.success(o.data.message),this.$router.push({name:"ListRequestUpdateTask"})}catch(o){const u=((s=(a=o.response)==null?void 0:a.data)==null?void 0:s.message)||o;this.$toast.error(u)}},cancelUpdate(){this.$router.push({name:"TaskInfo",params:{taskId:this.$route.params.id}})},formatDate(a){return new Date(a).toLocaleDateString()}},computed:{userId(){return this.$authStore.userId}}},e=a=>(v("data-v-eebd9dd7"),a=a(),b(),a),y={class:"card update-task-card"},T={class:"card-body d-flex"},I={class:"task-info mr-4"},S=e(()=>t("h5",{class:"card-title"},"Thông tin tác vụ",-1)),U=e(()=>t("strong",null,"Tiêu đề:",-1)),x=e(()=>t("strong",null,"Mô tả:",-1)),C=e(()=>t("strong",null,"Trạng thái hiện tại:",-1)),w=e(()=>t("strong",null,"Ngày tạo:",-1)),N=e(()=>t("strong",null,"Ngày tới hạn",-1)),E={class:"update-form"},M=e(()=>t("h5",{class:"card-title"},"Cập nhật trạng thái tác vụ",-1)),L={class:"form-group"},V=e(()=>t("label",{for:"status"},"Trạng thái mới",-1)),q=e(()=>t("option",{value:"IN_PROGRESS"},"Đang xử lý",-1)),B=e(()=>t("option",{value:"COMPLETED"},"Hoàn thành",-1)),H=e(()=>t("option",{value:"CANCELED"},"Hủy bỏ",-1)),R=[q,B,H],A={class:"form-group"},O=e(()=>t("label",{for:"updateDescription"},"Mô tả lần cập nhật",-1)),P=e(()=>t("button",{type:"submit",class:"btn btn-primary mt-2"},"Cập nhật",-1));function G(a,s,o,u,r,i){return _(),m("div",y,[t("div",T,[t("div",I,[S,t("p",null,[U,d(" "+c(r.task.title),1)]),t("p",null,[x,d(" "+c(r.task.description),1)]),t("p",null,[C,d(" "+c(r.task.status),1)]),t("p",null,[w,d(" "+c(i.formatDate(r.task.createdDate)),1)]),t("p",null,[N,d(" "+c(i.formatDate(r.task.date)),1)])]),t("div",E,[M,t("form",{onSubmit:s[3]||(s[3]=f((...n)=>i.submitUpdate&&i.submitUpdate(...n),["prevent"]))},[t("div",L,[V,p(t("select",{"onUpdate:modelValue":s[0]||(s[0]=n=>r.status=n),class:"form-control",id:"status",required:""},R,512),[[k,r.status]])]),t("div",A,[O,p(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=n=>r.updateDescription=n),class:"form-control",id:"updateDescription",placeholder:"Nhập mô tả về lần cập nhật...",required:""},null,512),[[g,r.updateDescription]])]),P,t("button",{onClick:s[2]||(s[2]=(...n)=>i.cancelUpdate&&i.cancelUpdate(...n)),class:"btn btn-secondary mt-2 ml-2"}," Hủy ")],32)])])])}const z=h(D,[["render",G],["__scopeId","data-v-eebd9dd7"]]);export{z as default};
