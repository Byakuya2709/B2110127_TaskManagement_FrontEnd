import{_,o as r,c as l,a as t,t as n,i as d,n as v,p as k,l as p,b as m,r as b,w as T,f as D,F as S,k as y,g as C,q as N}from"./index-B8bC3NQi.js";const x={props:{task:{type:Object,required:!0}},methods:{formatDate(s){return new Date(s).toLocaleDateString()},editTask(){this.$emit("editTask",this.task)},goToTaskDetail(){this.$router.push({name:"TaskInfo",params:{taskId:this.task.id}})}},computed:{statusBadge(){return{"badge-success":this.task.status==="COMPLETED","badge-warning":this.task.status==="PENDING","badge-danger":this.task.status==="CANCELED","badge-info":this.task.status==="IN_PROGRESS"}}}},i=s=>(k("data-v-0fa2526a"),s=s(),p(),s),E={class:"card-body"},I={class:"card-title task-title"},w=i(()=>t("hr",null,null,-1)),L={class:"card-text task-description"},$=i(()=>t("hr",null,null,-1)),B={class:"container task-details"},P={class:"row"},q={class:"col-6 text-right"},G=i(()=>t("strong",null,"Ngày tạo công việc:",-1)),O={class:"col-6 text-right"},V=i(()=>t("strong",null,"Ngày hoàn thành:",-1)),R={class:"col-6 text-right"},M=i(()=>t("strong",null,"Lần cuối cập nhật:",-1)),Q={class:"col-6 text-left"},A=i(()=>t("strong",null,"Chịu trách nhiệm:",-1)),F={class:"row mt-3"},j={class:"col-12 text-center"},z=i(()=>t("hr",null,null,-1));function H(s,a,e,g,u,o){return r(),l("div",{onClick:a[0]||(a[0]=(...h)=>o.goToTaskDetail&&o.goToTaskDetail(...h)),class:"card task-card"},[t("div",E,[t("h5",I,n(e.task.title),1),w,t("p",L,n(e.task.description),1),$,t("div",B,[t("div",P,[t("div",q,[G,d(" "+n(o.formatDate(e.task.createdDate)),1)]),t("div",O,[V,d(" "+n(o.formatDate(e.task.date)),1)]),t("div",R,[M,d(" "+n(o.formatDate(e.task.updatedDate)),1)]),t("div",Q,[A,d(" "+n(e.task.userName),1)])]),t("div",F,[t("div",j,[t("span",{class:v(["badge",o.statusBadge])},n(e.task.status),3)])])]),z])])}const U=_(x,[["render",H],["__scopeId","data-v-0fa2526a"]]),J={components:{TaskComponent:U},data(){return{tasks:[],selectedStatus:this.$route.query.status||""}},computed:{user(){return this.$authStore.user},filteredTasks(){return this.selectedStatus?this.tasks.filter(s=>s.status===this.selectedStatus):this.tasks}},created(){this.fetchTasks()},methods:{async fetchTasks(){var s,a;try{const e=await m.get(`/user/group/${this.user.id}/tasks`);this.tasks=e.data.data}catch(e){console.log(e),this.$toast.error(((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Có lỗi xảy ra")}},updateQuery(){this.selectedStatus?this.$router.push({query:{status:this.selectedStatus}}):this.$router.push({query:null})}}},f=s=>(k("data-v-a48bb98f"),s=s(),p(),s),K={class:"task-list container"},W=f(()=>t("h2",{class:"text-center"},"Danh sách tác vụ của các thành viên trong nhóm",-1)),X={class:"text-left mb-3"},Y=f(()=>t("label",{for:"status-filter"},"Lọc theo trạng thái:",-1)),Z=N('<option value="" data-v-a48bb98f>Tất cả</option><option value="COMPLETED" data-v-a48bb98f>Hoàn thành</option><option value="IN_PROGRESS" data-v-a48bb98f>Đang thực hiện</option><option value="PENDING" data-v-a48bb98f>Đang chờ</option><option value="CANCELED" data-v-a48bb98f>Bị hủy</option>',5),tt=[Z],st={class:"row"};function et(s,a,e,g,u,o){const h=b("TaskComponent");return r(),l("div",K,[W,t("div",X,[Y,T(t("select",{id:"status-filter","onUpdate:modelValue":a[0]||(a[0]=c=>u.selectedStatus=c),onChange:a[1]||(a[1]=(...c)=>o.updateQuery&&o.updateQuery(...c))},tt,544),[[D,u.selectedStatus]])]),t("div",st,[(r(!0),l(S,null,y(o.filteredTasks,c=>(r(),l("div",{key:c.id,class:"col-md-4 mb-3"},[C(h,{task:c},null,8,["task"])]))),128))])])}const ot=_(J,[["render",et],["__scopeId","data-v-a48bb98f"]]);export{ot as default};
