import{_ as v,b as u,o as n,c as o,a as r,w as l,v as p,n as c,d as m,f as h,F as f,k as b,e as _,t as g}from"./index-j5l7Oigf.js";const k={name:"NewGroup",data(){return{name:"",description:"",userId:"",users:[],validate:{name:!1,description:!1,user:!1}}},computed:{isValidated(){return Object.values(this.validate).every(s=>s)}},methods:{async fetchAllUser(){try{const s=await u.get("/admin/user/no-group");this.users=s.data.data}catch(s){this.showToastError(s)}},async createGroup(){if(!this.isValidated)return;const s={name:this.name,description:this.description,userId:this.userId};try{const e=await u.post("/admin/group/create",s);this.$toast.success(e.data.message),this.resetForm()}catch(e){this.showToastError(e)}},validateName(s){this.validate.name=s.length>=6},validateDescription(s){this.validate.description=!!s.trim()},validateUserId(s){this.validate.user=!!s},showToastError(s){var e,d;this.$toast.error(((d=(e=s.response)==null?void 0:e.data)==null?void 0:d.message)||s.message)},resetForm(){this.name="",this.description="",this.userId="",this.validate={name:!0,description:!0,user:!0}}},created(){this.fetchAllUser()}},y={class:"mb-3"},I=r("label",{for:"name",class:"form-label"},"Tên nhóm:",-1),w={key:0,class:"invalid-feedback"},N={class:"mb-3"},V=r("label",{for:"description",class:"form-label"},"Mô tả:",-1),T={key:0,class:"invalid-feedback"},U={class:"mb-3"},x=r("label",{for:"userId",class:"form-label"},"Nhóm trưởng:",-1),D=r("option",{value:"",disabled:""},"Chọn một nhân viên",-1),G=["value"],M={key:0,class:"invalid-feedback"},C=["disabled"];function E(s,e,d,F,t,a){return n(),o("form",{onSubmit:e[6]||(e[6]=_((...i)=>a.createGroup&&a.createGroup(...i),["prevent"]))},[r("div",y,[I,l(r("input",{type:"text",class:c(["form-control",{"is-invalid":!t.validate.name}]),id:"name","onUpdate:modelValue":e[0]||(e[0]=i=>t.name=i),onInput:e[1]||(e[1]=i=>a.validateName(t.name))},null,34),[[p,t.name]]),t.validate.name?m("",!0):(n(),o("div",w," Tên nhóm phải có ít nhất 6 ký tự. "))]),r("div",N,[V,l(r("textarea",{class:c(["form-control",{"is-invalid":!t.validate.description}]),id:"description","onUpdate:modelValue":e[2]||(e[2]=i=>t.description=i),onInput:e[3]||(e[3]=i=>a.validateDescription(t.description))},null,34),[[p,t.description]]),t.validate.description?m("",!0):(n(),o("div",T," Mô tả không được bỏ trống. "))]),r("div",U,[x,l(r("select",{class:c(["form-select",{"is-invalid":!t.validate.user}]),id:"userId","onUpdate:modelValue":e[4]||(e[4]=i=>t.userId=i),onChange:e[5]||(e[5]=i=>a.validateUserId(t.userId))},[D,(n(!0),o(f,null,b(t.users,i=>(n(),o("option",{key:i.id,value:i.id},g(i.fullname),9,G))),128))],34),[[h,t.userId]]),t.validate.user?m("",!0):(n(),o("div",M," Nhóm trưởng không được bỏ trống. "))]),r("button",{type:"submit",class:"btn btn-primary",disabled:!a.isValidated}," Tạo nhóm ",8,C)],32)}const S=v(k,[["render",E]]);export{S as default};
